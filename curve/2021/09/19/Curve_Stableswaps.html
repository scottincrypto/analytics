<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Stableswap Shoot-out | @scottincrypto</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Stableswap Shoot-out" />
<meta name="author" content="Scott Simpson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Is Curve the King of the Stablecoin Dex Market?" />
<meta property="og:description" content="Is Curve the King of the Stablecoin Dex Market?" />
<link rel="canonical" href="https://scottincrypto.github.io/analytics/curve/2021/09/19/Curve_Stableswaps.html" />
<meta property="og:url" content="https://scottincrypto.github.io/analytics/curve/2021/09/19/Curve_Stableswaps.html" />
<meta property="og:site_name" content="@scottincrypto" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-19T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://scottincrypto.github.io/analytics/curve/2021/09/19/Curve_Stableswaps.html","@type":"BlogPosting","headline":"Stableswap Shoot-out","dateModified":"2021-09-19T00:00:00-05:00","datePublished":"2021-09-19T00:00:00-05:00","author":{"@type":"Person","name":"Scott Simpson"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://scottincrypto.github.io/analytics/curve/2021/09/19/Curve_Stableswaps.html"},"description":"Is Curve the King of the Stablecoin Dex Market?","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/analytics/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://scottincrypto.github.io/analytics/feed.xml" title="@scottincrypto" /><link rel="shortcut icon" type="image/x-icon" href="/analytics/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/analytics/">@scottincrypto</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/analytics/about/">About Me</a><a class="page-link" href="/analytics/search/">Search</a><a class="page-link" href="/analytics/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Stableswap Shoot-out</h1><p class="page-description">Is Curve the King of the Stablecoin Dex Market?</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-09-19T00:00:00-05:00" itemprop="datePublished">
        Sep 19, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Scott Simpson</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      13 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/analytics/categories/#Curve">Curve</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/scottincrypto/analytics/tree/master/_notebooks/2021-09-19-Curve_Stableswaps.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/analytics/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          
          <div class="px-2">
    <a href="https://colab.research.google.com/github/scottincrypto/analytics/blob/master/_notebooks/2021-09-19-Curve_Stableswaps.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/analytics/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#Stablecoin-Swaps">Stablecoin Swaps </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Stableswap-Efficiency">Stableswap Efficiency </a></li>
<li class="toc-entry toc-h2"><a href="#Dex-Models">Dex Models </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Uniswap-V2---Constant-Product-AMM">Uniswap V2 - Constant Product AMM </a></li>
<li class="toc-entry toc-h4"><a href="#Curve---Optimised-Swap-Curves-for-Stableswaps">Curve - Optimised Swap Curves for Stableswaps </a></li>
<li class="toc-entry toc-h4"><a href="#Uniswap-V3---Targeted-Liquidity">Uniswap V3 - Targeted Liquidity </a></li>
<li class="toc-entry toc-h4"><a href="#Balancer">Balancer </a></li>
<li class="toc-entry toc-h4"><a href="#Saddle">Saddle </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Judging-the-Stableswap-Options">Judging the Stableswap Options </a></li>
<li class="toc-entry toc-h1"><a href="#Overall-Performance-Across-all-Stableswap-Pairs">Overall Performance Across all Stableswap Pairs </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Excluding-Gas">Excluding Gas </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Including-Gas">Including Gas </a></li>
<li class="toc-entry toc-h1"><a href="#Performance-by-Swap-Size">Performance by Swap Size </a></li>
<li class="toc-entry toc-h1"><a href="#Excluding-Gas-Costs">Excluding Gas Costs </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Including-Gas-Costs">Including Gas Costs </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Return-by-Swap-Pair">Return by Swap Pair </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Transaction-Cost-by-Swap-Pair">Transaction Cost by Swap Pair </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Conclusions">Conclusions </a></li>
<li class="toc-entry toc-h1"><a href="#References:">References: </a></li>
</ul><body>
<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-09-19-Curve_Stableswaps.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Stablecoin-Swaps">
<a class="anchor" href="#Stablecoin-Swaps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stablecoin Swaps<a class="anchor-link" href="#Stablecoin-Swaps"> </a>
</h1>
<p>Stablecoins arguably form the basis for decentralised finance on Ethereum.  Whether it's borrowing, lending, liquidity provision or yield farming, there are almost always stablecoins in the middle of it.  The stablecoins we are referring to here are the 3 big USD pegged stablecoins -  USDC, USDT and DAI.  Defi is full of decentralised token exchanges - dex - which exchange one token for another.  A specialised use case of the dex is stablecoin swaps - exchanging between USDC, USDT and DAI either to get the right token for the job users need to do, or to arbitrage between 3 assets that should be worth USD 1 each but often are not exactly.  As the value of each of these coins is close to equal, a number of optimisations to the traditional AMM dex model have evolved for stablecoin swaps.  The intent of this post is to look at the efficiency of these alternatives &amp; see which one gives the best results for users.</p>
<h2 id="Stableswap-Efficiency">
<a class="anchor" href="#Stableswap-Efficiency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stableswap Efficiency<a class="anchor-link" href="#Stableswap-Efficiency"> </a>
</h2>
<p>Firstly we should define what we mean by efficiency of a stablecoin swap.  Let's imagine a magical world where USDC, USDC and DAI are worth exacly 1 USD each.  Right now, it's really close to that, but certain parties assign different risk discounts to each coin and it is not always the case.  We will make the assumption that these coins are equivalent in underlying value as the arbitrage trade is enormous and relatively efficient.  A perfect stablecoins swap should therefore be receiving tokens at a 1:1 ratio.  It is almost always less than this, due to four areas of loss for the user:</p>
<ul>
<li>Swap fees - a dex will generate revenue by taking a percentage of each swap.  It is a competitive market for stableswaps, and these fees are often very low - 0.05% for Uniswap v3 and 0.03% for Curve on stablecoin swaps.</li>
<li>Price Impact - The quoted price on a dex is the price for the next token swapped, regardless of the size of the trade.  Dex type exchanges rely on a pool of liquidity for each token in the swap, with the actual swap price being a function of the ratio of the tokens in the pool <em>after</em> the swap occurs.  If the swap is a significant portion of the pool liquidity it can move the realised price that the user receives.  This can be mitigated by the design of the AMM, particularly with stablecoin swaps where the swap range between tokens is very narrow.  This is a key component of our analysis here - dex protocols don't just compete on fees, they also compete on the swap curve design.  A number of our target protocols have optimised the swap curve to minimise price impact on swaps.</li>
<li>Slippage - a blockchain is a dynamic environment, being used by potentially millions of users at any one time.  Slippage occurs when the quoted price of a swap changes due to the action of other simultaneous market participants.  A user can submit a swap at a given price, but if a large transaction occurs at around the same time, the user may receive more or less than expected because of this transaction.  This is known as slippage, and most dex UIs include a limit on slippage tolerance for the user.  If the slippage is more than the tolerance, the transaction will fail.</li>
<li>Blockchain Transaction Fees - the Ethereum network uses the ETH token to pay for blockspace in the blockchain, and this payment is called gas.  Blockspace is a limited resource and there is a free market for inclusion.  Prices are high during times of congestion and lower at other times.  Gas prices form a significant portion of dex impact for users, particularly with lower value swaps.</li>
</ul>
<p>The focus of this post is the user - what does the user get in a stablecoins swap, compared with the 1:1 ideal situation?</p>
<h2 id="Dex-Models">
<a class="anchor" href="#Dex-Models" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dex Models<a class="anchor-link" href="#Dex-Models"> </a>
</h2>
<p>Before we begin, an outline of each dex model is in order:</p>
<h4 id="Uniswap-V2---Constant-Product-AMM">
<a class="anchor" href="#Uniswap-V2---Constant-Product-AMM" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uniswap V2 - Constant Product AMM<a class="anchor-link" href="#Uniswap-V2---Constant-Product-AMM"> </a>
</h4>
<p>Uniswap launched as the OG Automated Market Maker dex, based on a <a href="https://www.reddit.com/r/ethereum/comments/55m04x/lets_run_onchain_decentralized_exchanges_the_way/">Reddit post by Vitalik in 2016</a>.  It uses the constant product model - x * y = k, where the price of a token in a dex pool is equal to the ratio of that token to the other token in the pool.  Uniswap was hugely successful with this model, spawning many imitators.</p>
<h4 id="Curve---Optimised-Swap-Curves-for-Stableswaps">
<a class="anchor" href="#Curve---Optimised-Swap-Curves-for-Stableswaps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Curve - Optimised Swap Curves for Stableswaps<a class="anchor-link" href="#Curve---Optimised-Swap-Curves-for-Stableswaps"> </a>
</h4>
<p>Constant product dex markets are subject to price impact and slippage.  They are optimised for swapping between a large number of tokens, rather than efficient swaps between a small number.  Michael Egorov, the founder of Curve, recognised this and founded Curve, with a swap curve more efficient than the constant product model for swaps of tokens of a similar value.  It was enormously successful and has attracted over USD 12b of liquidity.  Curve has the <a href="https://curve.fi/3pool/">Tripool</a> - an AMM pool for USDC, USDT and DAI with over USD 2b of liquidity alone.</p>
<h4 id="Uniswap-V3---Targeted-Liquidity">
<a class="anchor" href="#Uniswap-V3---Targeted-Liquidity" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uniswap V3 - Targeted Liquidity<a class="anchor-link" href="#Uniswap-V3---Targeted-Liquidity"> </a>
</h4>
<p>In the constant product AMM model, the liquidity is spread over all prices for both tokens.  For pegged stablecoins, where the price of each coin is well within 1% of the price of the other coins, this means that much of the liquidity is never utilised.  Uniswap launched V3 of their protocol, allowing users to target their liquidity around specified price points.  This had a major impact on the capital efficiency of stablecoin swap pools and helped to close the market gap to Curve.</p>
<h4 id="Balancer">
<a class="anchor" href="#Balancer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Balancer<a class="anchor-link" href="#Balancer"> </a>
</h4>
<p>Balancer uses a single vault model, where users interact with a single contract for all swaps.  The swap logic is abstracted away to underlying pools so that the user only pays gas fees on the vault transactions.  The underlying pools implement optimised swap curves for the target tokens, giving users advantages in swap efficiency and gas usage.</p>
<h4 id="Saddle">
<a class="anchor" href="#Saddle" aria-hidden="true"><span class="octicon octicon-link"></span></a>Saddle<a class="anchor-link" href="#Saddle"> </a>
</h4>
<p>Imitation is the sincerest form of flattery.  Saddle launched to outcries of copyright infringement with their Curve inspired stableswap AMM.  Let's see how it stacks up.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Judging-the-Stableswap-Options">
<a class="anchor" href="#Judging-the-Stableswap-Options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Judging the Stableswap Options<a class="anchor-link" href="#Judging-the-Stableswap-Options"> </a>
</h1>
<p>To analyse which is the best option for users when swapping stablecoins, we collected on-chain data from <a href="https://flipsidecrypto.com">Flipside Crypto</a>.  This data looked at swaps between the three major pegged stablecoins (USDC, DAI, USDT) on the five platforms described above (Curve, Uniswap V2 &amp; V3, Balancer, Saddle).  Sushi was excluded from the analysis as it carries very low liquidity in stable-stable pair pools - it appears most stableswaps are done via intermediate tokens like ETH.  Data was sourced which met the following criteria:</p>
<ul>
<li>Swaps occured during the last 2 months (to 2021-09-17)</li>
<li>Swaps weren't done via aggregators like 1inch or Paraswap - direct with the protocol only</li>
<li>Swaps weren't routed between intermediate pairs - they were direct in &amp; out of the stablecoin pools</li>
<li>Transactions with zero gas fees were excluded - services like Flashbots allow advanced users to substitute gas costs with direct payments to block miners.</li>
</ul>
<p>The analysis centered on the return to the users - for every token swapped in a stablecoin swap, how much was lost in the transaction.  Assuming that each of our stablecoins is equivalent in value (1 USD), this was calculated by dividing the received token amount by the submitted token amount.  This was done in two ways:</p>
<ul>
<li>Excluding gas costs - looking at swap fees, price impact &amp; slippage only.  This give insight into the underlying design &amp; liquidity of the swap protocol.</li>
<li>Including gas costs - the net outcome for the user.  <em>The only thing that really matters.</em>
</li>
</ul>
<p><em>Note on Balancer - Balancer swaps can include a rebate in BAL tokens for user gas costs.  These have not been considered in this analysis, because they have been interpreted as a usage incentive which may not persist, rather than as an underlying part of the protocol.</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Overall-Performance-Across-all-Stableswap-Pairs">
<a class="anchor" href="#Overall-Performance-Across-all-Stableswap-Pairs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overall Performance Across all Stableswap Pairs<a class="anchor-link" href="#Overall-Performance-Across-all-Stableswap-Pairs"> </a>
</h1>
<p>The first analysis makes the assumption that USDC, DAI and USDC are equivalent in value, so we don't differentiate between swap pairs (yet).  For all the transactions which meet the criteria in the paragraph above, we look at the transaction cost to the user.  This transaction cost, expressed as a percentage, is the amount lost compared to the ideal 1:1 swap from a perfect exchange.  More formally, it is:</p>
<p><img src="https://raw.githubusercontent.com/scottincrypto/analytics/f31798ce382b8360d7160d87ea4165195a351716/data/curve_stableswap.gif" alt="TransactionCostForumula"></p>
<p>For example, if the user puts in 100 USDC and receives 99 DAI, then the transaction cost % would be 1%.  Lower is better.</p>
<h2 id="Excluding-Gas">
<a class="anchor" href="#Excluding-Gas" aria-hidden="true"><span class="octicon octicon-link"></span></a>Excluding Gas<a class="anchor-link" href="#Excluding-Gas"> </a>
</h2>
<p>The chart below shows the transaction cost % across all pairs over the last 2 months, excluding the impacts of gas.  As we can see, Curve is the most cost efficient dex, with an average transaction cost impact of under .04%.  Curve charges 0.03% as a protocol fee on the Tripool, so there is around 0.01% of slippage &amp; price impact on stablecoin trades on Curve.  Compare this to Uniswap v3, which has 0.05% fees.  The Uniswap v3 overall cost impact is <em>less</em> than the fees, indicating that there may be some positive slippage &amp; price impact for users on the platform.  Here we also see the benefits of optimising for stablecoin swaps over a generall AMM model.  The Uniswap V2 platform - built for swapping many different tokens over all price ranges - is an order of magnitude more costly than the optimised stableswap dex environments.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="a866b7b1-f590-4a18-a134-743e86fe7b4a" class="plotly-graph-div" style="height:494.4375772558714px; width:800px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a866b7b1-f590-4a18-a134-743e86fe7b4a")) {                    Plotly.newPlot(                        "a866b7b1-f590-4a18-a134-743e86fe7b4a",                        [{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x","y":[0.03940033259478559],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x","y":[0.048669545332413744],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x","y":[0.0639128951461343],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x","y":[0.07321458452566043],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x","y":[0.4453163013325323],"yaxis":"y"}],                        {"barmode":"relative","height":494.4375772558714,"legend":{"title":{"text":"Protocol"},"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Total Transaction Costs Excluding Gas"},"width":800,"xaxis":{"anchor":"y","categoryarray":["Curve","Uniswap v3","Saddle","Balancer","Uniswap v2"],"categoryorder":"array","domain":[0.0,1.0],"title":{"text":"Protocol"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Transaction Cost %"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a866b7b1-f590-4a18-a134-743e86fe7b4a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Including-Gas">
<a class="anchor" href="#Including-Gas" aria-hidden="true"><span class="octicon octicon-link"></span></a>Including Gas<a class="anchor-link" href="#Including-Gas"> </a>
</h1>
<p>It's no secret that gas costs have been prohibitive on Ethereum over the past 2 months.  The NFT boom has driven up competition for blockspace and gas levels have been consistently high, as well as suffering from extraordinary short term spikes.  When we factor this into the analysis the results are as below.  Curve is still the most efficient dex overall, with an average impact of 0.045%.  Uniswap v3 is next, then there is daylight to the others.  As gas costs in a transaction are a fixed amount the impact of gas will depend on the swap size.  There is probably a swap size influence on these numbers below - this will be investigated further.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="d7495668-6f4d-4eb3-a085-41f43f66dbef" class="plotly-graph-div" style="height:494.4375772558714px; width:800px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("d7495668-6f4d-4eb3-a085-41f43f66dbef")) {                    Plotly.newPlot(                        "d7495668-6f4d-4eb3-a085-41f43f66dbef",                        [{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x","y":[0.04550384526520457],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x","y":[0.08006151931662098],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x","y":[0.19190772630173214],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x","y":[0.7413362428929093],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x","y":[1.3316470498252575],"yaxis":"y"}],                        {"barmode":"relative","height":494.4375772558714,"legend":{"title":{"text":"Protocol"},"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Total Transaction Costs Including Gas"},"width":800,"xaxis":{"anchor":"y","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.0,1.0],"title":{"text":"Protocol"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Transaction Cost %"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('d7495668-6f4d-4eb3-a085-41f43f66dbef');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Performance-by-Swap-Size">
<a class="anchor" href="#Performance-by-Swap-Size" aria-hidden="true"><span class="octicon octicon-link"></span></a>Performance by Swap Size<a class="anchor-link" href="#Performance-by-Swap-Size"> </a>
</h1>
<p>The charts below show how much volume is swapped on the exchanges in different swap size classes.  We can see that for swap sizes below USD 100k, Uniswap has the most volume across both v2 and v3.  For swap sizes between 100k and 1m, Curve and Uniswap v3 dominate.  Above 1m, Curve is the clear choice for stablecoin swaps.  We can conclude that for small swaps, users favour the popularity &amp; ease of use of the Uniswap platform, but for serious sized swaps there is a greater sophistication and a desire to get the best deal possible.  We also see that Balancer &amp; Saddle have insignificant swap amounts compared with the others.  It's worth reinforcing that the swaps investigated here are only those done directly via the protocols - much of the volume routed through Balancer &amp; Saddle are likely coming from aggregators and other protocols.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="da1c8213-8370-4336-90c3-987574bd7028" class="plotly-graph-div" style="height:618.0469715698392px; width:1000px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("da1c8213-8370-4336-90c3-987574bd7028")) {                    Plotly.newPlot(                        "da1c8213-8370-4336-90c3-987574bd7028",                        [{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x4","y":[70199.4818846573],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x5","y":[2908561.191066888],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x6","y":[46911601.46016399],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x","y":[348402353.735166],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x2","y":[645593609.2355343],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=>100m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x3","y":[479481382.4853087],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x4","y":[1532052.7893209269],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x5","y":[26821114.595115658],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x6","y":[187254820.85280883],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x","y":[348222200.3551261],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x2","y":[272438125.0205811],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=>100m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x3","y":[118005915.192094],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x4","y":[9341.82909484869],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x5","y":[190206.23671394598],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x6","y":[908960.3199930359],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x","y":[1280000.0],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x4","y":[6406795.826598748],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x5","y":[87007034.26395398],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x6","y":[228505268.50605622],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Volume USD=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x","y":[59844367.95638248],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x4","y":[50767.886145400196],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x5","y":[668561.9541171291],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Volume USD=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x6","y":[119426.6495062115],"yaxis":"y6"}],                        {"annotations":[{"font":{},"showarrow":false,"text":"Swap Size=1m","x":0.15666666666666665,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=10m","x":0.4999999999999999,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=>100m","x":0.8433333333333332,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=1k","x":0.15666666666666665,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=10k","x":0.4999999999999999,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=100k","x":0.8433333333333332,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"}],"barmode":"relative","height":618.0469715698392,"legend":{"title":{"text":"Protocol"},"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Transaction Volume by Swap Size"},"width":1000,"xaxis":{"anchor":"y","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.0,0.3133333333333333],"title":{"text":"Protocol"}},"xaxis2":{"anchor":"y2","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.34333333333333327,0.6566666666666665],"matches":"x","title":{"text":"Protocol"}},"xaxis3":{"anchor":"y3","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.6866666666666665,0.9999999999999998],"matches":"x","title":{"text":"Protocol"}},"xaxis4":{"anchor":"y4","domain":[0.0,0.3133333333333333],"matches":"x","showticklabels":false},"xaxis5":{"anchor":"y5","domain":[0.34333333333333327,0.6566666666666665],"matches":"x","showticklabels":false},"xaxis6":{"anchor":"y6","domain":[0.6866666666666665,0.9999999999999998],"matches":"x","showticklabels":false},"yaxis":{"anchor":"x","domain":[0.0,0.46499999999999997],"showticklabels":true,"title":{"text":"Volume USD"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.46499999999999997],"showticklabels":true},"yaxis3":{"anchor":"x3","domain":[0.0,0.46499999999999997],"showticklabels":true},"yaxis4":{"anchor":"x4","domain":[0.5349999999999999,0.9999999999999999],"showticklabels":true,"title":{"text":"Volume USD"}},"yaxis5":{"anchor":"x5","domain":[0.5349999999999999,0.9999999999999999],"showticklabels":true},"yaxis6":{"anchor":"x6","domain":[0.5349999999999999,0.9999999999999999],"showticklabels":true}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('da1c8213-8370-4336-90c3-987574bd7028');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Excluding-Gas-Costs">
<a class="anchor" href="#Excluding-Gas-Costs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Excluding Gas Costs<a class="anchor-link" href="#Excluding-Gas-Costs"> </a>
</h1>
<p>The graph below shows the transaction costs, excluding gas, segmented by swap size.  The charts are relatively consistent, with Curve being the best performer across all classes.  An interesting trend is the increase in costs in Uniswap v2 as the swap size increases.  This is due to price impacts in the pool - the larger swaps are a big enough proportion of the total pool liquidity to impact the price.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="3733336d-d533-4c03-9722-e005203e01f3" class="plotly-graph-div" style="height:618.0469715698392px; width:1000px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("3733336d-d533-4c03-9722-e005203e01f3")) {                    Plotly.newPlot(                        "3733336d-d533-4c03-9722-e005203e01f3",                        [{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x4","y":[0.033508429253314986],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x5","y":[0.03947428571131617],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x6","y":[0.036365250822567585],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x","y":[0.040192819042161876],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x2","y":[0.04015737840539213],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=>100m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x3","y":[0.03810253658930174],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x4","y":[0.04774960904782022],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x5","y":[0.04662643974008285],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x6","y":[0.04814169839826299],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x","y":[0.05130155048566065],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x2","y":[0.046345951105064565],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=>100m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x3","y":[0.0475811479607513],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x4","y":[0.05391595313281039],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x5","y":[0.05214713815649974],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x6","y":[0.07529354038827707],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x","y":[0.07500970626095338],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x4","y":[0.06339651999884843],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x5","y":[0.06561160305860181],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x6","y":[0.05462287310051828],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x4","y":[0.29965158324570806],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x5","y":[0.3271009301321848],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x6","y":[0.417993834180308],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x","y":[0.7371088500660816],"yaxis":"y"}],                        {"annotations":[{"font":{},"showarrow":false,"text":"Swap Size=1m","x":0.15999999999999998,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=10m","x":0.49999999999999994,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=>100m","x":0.8399999999999999,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=1k","x":0.15999999999999998,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=10k","x":0.49999999999999994,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=100k","x":0.8399999999999999,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"}],"barmode":"relative","height":618.0469715698392,"legend":{"title":{"text":"Protocol"},"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Total Transaction Costs Excluding Gas"},"width":1000,"xaxis":{"anchor":"y","categoryarray":["Curve","Uniswap v3","Balancer","Saddle","Uniswap v2"],"categoryorder":"array","domain":[0.0,0.31999999999999995],"title":{"text":"Protocol"}},"xaxis2":{"anchor":"y2","categoryarray":["Curve","Uniswap v3","Balancer","Saddle","Uniswap v2"],"categoryorder":"array","domain":[0.33999999999999997,0.6599999999999999],"matches":"x","title":{"text":"Protocol"}},"xaxis3":{"anchor":"y3","categoryarray":["Curve","Uniswap v3","Balancer","Saddle","Uniswap v2"],"categoryorder":"array","domain":[0.6799999999999999,0.9999999999999999],"matches":"x","title":{"text":"Protocol"}},"xaxis4":{"anchor":"y4","domain":[0.0,0.31999999999999995],"matches":"x","showticklabels":false},"xaxis5":{"anchor":"y5","domain":[0.33999999999999997,0.6599999999999999],"matches":"x","showticklabels":false},"xaxis6":{"anchor":"y6","domain":[0.6799999999999999,0.9999999999999999],"matches":"x","showticklabels":false},"yaxis":{"anchor":"x","domain":[0.0,0.46499999999999997],"title":{"text":"Transaction Cost %"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.46499999999999997],"matches":"y","showticklabels":false},"yaxis3":{"anchor":"x3","domain":[0.0,0.46499999999999997],"matches":"y","showticklabels":false},"yaxis4":{"anchor":"x4","domain":[0.5349999999999999,0.9999999999999999],"matches":"y","title":{"text":"Transaction Cost %"}},"yaxis5":{"anchor":"x5","domain":[0.5349999999999999,0.9999999999999999],"matches":"y","showticklabels":false},"yaxis6":{"anchor":"x6","domain":[0.5349999999999999,0.9999999999999999],"matches":"y","showticklabels":false}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('3733336d-d533-4c03-9722-e005203e01f3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Including-Gas-Costs">
<a class="anchor" href="#Including-Gas-Costs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Including Gas Costs<a class="anchor-link" href="#Including-Gas-Costs"> </a>
</h2>
<p>Now we see the real outcome for the user, with gas costs included.  The charts below show the total transaction cost, including gas, across the different swap size cohorts.  Please note the scales are now different on each chart to allow better comparison.  We see that for smaller swap sizes (&lt; 10k), the gas efficiency of Uniswap v3 makes this the cheapest option for users.  There is a significant margin in this advantage for very small swaps (&lt; 1k).  As swap sizes increase, however, the underlying protocol and liquidity advantage of Curve washes away the gas costs and we see Curve as the best performing dex for swap sizes larger than USD 10k</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="218f50cd-6905-4c1a-b645-56e8ad174574" class="plotly-graph-div" style="height:618.0469715698392px; width:1000px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("218f50cd-6905-4c1a-b645-56e8ad174574")) {                    Plotly.newPlot(                        "218f50cd-6905-4c1a-b645-56e8ad174574",                        [{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x4","y":[5.981353642801979],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x5","y":[0.5220848372289977],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x6","y":[0.09617968298265556],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x","y":[0.04931208154510536],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x2","y":[0.04217700892754639],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=>100m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x3","y":[0.03842591998769462],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x4","y":[2.536508669947679],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x5","y":[0.43521688258562063],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x6","y":[0.10738792151184784],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x","y":[0.06328583809623867],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x2","y":[0.047494371088152576],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=>100m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x3","y":[0.047627717343856624],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x4","y":[5.668490314810737],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x5","y":[0.662049630331818],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x6","y":[0.1667584924840093],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x","y":[0.0971640836790244],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x4","y":[4.303009563345073],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x5","y":[0.9858675107491166],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x6","y":[0.536222016274035],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1m<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x","y":[0.770308149948884],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<1k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x4","y":[7.67554047442972],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<10k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x5","y":[1.0245147711546942],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Size=<100k<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x6","y":[0.1496688967893567],"yaxis":"y6"}],                        {"annotations":[{"font":{},"showarrow":false,"text":"Swap Size=<1m","x":0.15666666666666665,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=<10m","x":0.4999999999999999,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=>100m","x":0.8433333333333332,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=<1k","x":0.15666666666666665,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=<10k","x":0.4999999999999999,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Size=<100k","x":0.8433333333333332,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"}],"barmode":"relative","height":618.0469715698392,"legend":{"title":{"text":"Protocol"},"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Total Transaction Costs Including Gas"},"width":1000,"xaxis":{"anchor":"y","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.0,0.3133333333333333],"title":{"text":"Protocol"}},"xaxis2":{"anchor":"y2","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.34333333333333327,0.6566666666666665],"matches":"x","title":{"text":"Protocol"}},"xaxis3":{"anchor":"y3","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.6866666666666665,0.9999999999999998],"matches":"x","title":{"text":"Protocol"}},"xaxis4":{"anchor":"y4","domain":[0.0,0.3133333333333333],"matches":"x","showticklabels":false},"xaxis5":{"anchor":"y5","domain":[0.34333333333333327,0.6566666666666665],"matches":"x","showticklabels":false},"xaxis6":{"anchor":"y6","domain":[0.6866666666666665,0.9999999999999998],"matches":"x","showticklabels":false},"yaxis":{"anchor":"x","domain":[0.0,0.46499999999999997],"showticklabels":true,"title":{"text":"Transaction Cost %"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.46499999999999997],"showticklabels":true},"yaxis3":{"anchor":"x3","domain":[0.0,0.46499999999999997],"showticklabels":true},"yaxis4":{"anchor":"x4","domain":[0.5349999999999999,0.9999999999999999],"showticklabels":true,"title":{"text":"Transaction Cost %"}},"yaxis5":{"anchor":"x5","domain":[0.5349999999999999,0.9999999999999999],"showticklabels":true},"yaxis6":{"anchor":"x6","domain":[0.5349999999999999,0.9999999999999999],"showticklabels":true}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('218f50cd-6905-4c1a-b645-56e8ad174574');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Return-by-Swap-Pair">
<a class="anchor" href="#Return-by-Swap-Pair" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return by Swap Pair<a class="anchor-link" href="#Return-by-Swap-Pair"> </a>
</h1>
<p>To confirm the conclusions above, we will look to see if there is any influence on transaction costs based on the swap pair.  The chart below shows the volume of swaps by swap pair.  There is a difference in volume between the most popular and least popular swap directions of around 3x - we will see if this influences the transaction cost outcomes.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="6288b6b3-706e-4d66-9a64-b898e809fdf5" class="plotly-graph-div" style="height:494.4375772558714px; width:800px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("6288b6b3-706e-4d66-9a64-b898e809fdf5")) {                    Plotly.newPlot(                        "6288b6b3-706e-4d66-9a64-b898e809fdf5",                        [{"alignmentgroup":"True","hovertemplate":"Swap Pair=%{x}<br>Volume USD=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["USDC-DAI","DAI-USDC","USDC-USDT","USDT-USDC","DAI-USDT","USDT-DAI"],"xaxis":"x","y":[381648863.235568,471117584.0009863,797987021.926742,617881471.371248,242770337.30858782,351227389.979601],"yaxis":"y"}],                        {"barmode":"relative","height":494.4375772558714,"legend":{"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Transaction Volume USD"},"width":800,"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Swap Pair"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Volume USD"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('6288b6b3-706e-4d66-9a64-b898e809fdf5');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Transaction-Cost-by-Swap-Pair">
<a class="anchor" href="#Transaction-Cost-by-Swap-Pair" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transaction Cost by Swap Pair<a class="anchor-link" href="#Transaction-Cost-by-Swap-Pair"> </a>
</h2>
<p>The charts below shows the transaction costs, including gas, split by the swap pairs.  The trend is relatively consistent across all pairs, and conistent with the overall conclusions we have made. Curve is the best performing dex across the board, followed by Uniswap v3.  An interesting feature of these charts are the DAI-USDT and DAI-USDC performance of Curve - the transaction costs are much lower than the average, probably due to favourable price impact in the swaps.  For the DAI-USDC swap direction there is a negative cost for the user - the user receives more USDC than the DAI swapped in.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

<meta charset="utf-8">

    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>                <div id="449017aa-50e5-499c-a08a-06ff12f7be2e" class="plotly-graph-div" style="height:618.0469715698392px; width:1000px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("449017aa-50e5-499c-a08a-06ff12f7be2e")) {                    Plotly.newPlot(                        "449017aa-50e5-499c-a08a-06ff12f7be2e",                        [{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x4","y":[0.0939966642213852],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x5","y":[-0.011884319862454085],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x6","y":[0.05210869704408427],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x2","y":[0.01166726628233361],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Curve","marker":{"color":"#FF1A00","pattern":{"shape":""}},"name":"Curve","offsetgroup":"Curve","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Curve"],"xaxis":"x3","y":[0.08987969259216522],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x4","y":[0.1755532240155122],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x5","y":[0.0071793802930764095],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x6","y":[0.12979917032445165],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x","y":[0.046603940824407886],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x2","y":[0.04690559142165318],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v3","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v3","offsetgroup":"Uniswap v3","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v3"],"xaxis":"x3","y":[0.1505404518595599],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x4","y":[0.24380126580779704],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x5","y":[0.22739347959633838],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x6","y":[0.1559948669280331],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x2","y":[0.10112576595648903],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Balancer","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Balancer","offsetgroup":"Balancer","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Balancer"],"xaxis":"x3","y":[0.30007284350399566],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x4","y":[0.8939019367904866],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x5","y":[0.6368586797513731],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x6","y":[0.6543634561261169],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x","y":[0.7740015389575472],"yaxis":"y"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x2","y":[0.5503334127571091],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Uniswap v2","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Uniswap v2","offsetgroup":"Uniswap v2","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Uniswap v2"],"xaxis":"x3","y":[1.0042545602324204],"yaxis":"y3"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":true,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x4","y":[1.1823077192446796],"yaxis":"y4"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDC<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x5","y":[0.8879299583738454],"yaxis":"y5"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDC-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x6","y":[1.012699075808432],"yaxis":"y6"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=DAI-USDT<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x2","y":[1.2175740909688648],"yaxis":"y2"},{"alignmentgroup":"True","hovertemplate":"Protocol=%{x}<br>Swap Pair=USDT-DAI<br>Transaction Cost %=%{y}<extra></extra>","legendgroup":"Saddle","marker":{"color":"#1F77B4","pattern":{"shape":""}},"name":"Saddle","offsetgroup":"Saddle","orientation":"v","showlegend":false,"textposition":"auto","type":"bar","x":["Saddle"],"xaxis":"x3","y":[1.7968483779614464],"yaxis":"y3"}],                        {"annotations":[{"font":{},"showarrow":false,"text":"Swap Pair=USDT-USDC","x":0.15999999999999998,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Pair=DAI-USDT","x":0.49999999999999994,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Pair=USDT-DAI","x":0.8399999999999999,"xanchor":"center","xref":"paper","y":0.46499999999999997,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Pair=USDC-DAI","x":0.15999999999999998,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Pair=DAI-USDC","x":0.49999999999999994,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Swap Pair=USDC-USDT","x":0.8399999999999999,"xanchor":"center","xref":"paper","y":0.9999999999999999,"yanchor":"bottom","yref":"paper"}],"barmode":"relative","height":618.0469715698392,"legend":{"title":{"text":"Protocol"},"tracegroupgap":0},"showlegend":false,"template":{"data":{"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Total Transaction Costs Including Gas"},"width":1000,"xaxis":{"anchor":"y","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.0,0.31999999999999995],"title":{"text":"Protocol"}},"xaxis2":{"anchor":"y2","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.33999999999999997,0.6599999999999999],"matches":"x","title":{"text":"Protocol"}},"xaxis3":{"anchor":"y3","categoryarray":["Curve","Uniswap v3","Balancer","Uniswap v2","Saddle"],"categoryorder":"array","domain":[0.6799999999999999,0.9999999999999999],"matches":"x","title":{"text":"Protocol"}},"xaxis4":{"anchor":"y4","domain":[0.0,0.31999999999999995],"matches":"x","showticklabels":false},"xaxis5":{"anchor":"y5","domain":[0.33999999999999997,0.6599999999999999],"matches":"x","showticklabels":false},"xaxis6":{"anchor":"y6","domain":[0.6799999999999999,0.9999999999999999],"matches":"x","showticklabels":false},"yaxis":{"anchor":"x","domain":[0.0,0.46499999999999997],"title":{"text":"Transaction Cost %"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.46499999999999997],"matches":"y","showticklabels":false},"yaxis3":{"anchor":"x3","domain":[0.0,0.46499999999999997],"matches":"y","showticklabels":false},"yaxis4":{"anchor":"x4","domain":[0.5349999999999999,0.9999999999999999],"matches":"y","title":{"text":"Transaction Cost %"}},"yaxis5":{"anchor":"x5","domain":[0.5349999999999999,0.9999999999999999],"matches":"y","showticklabels":false},"yaxis6":{"anchor":"x6","domain":[0.5349999999999999,0.9999999999999999],"matches":"y","showticklabels":false}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('449017aa-50e5-499c-a08a-06ff12f7be2e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>


</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Conclusions">
<a class="anchor" href="#Conclusions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusions<a class="anchor-link" href="#Conclusions"> </a>
</h1>
<p>In attempting to do a fair comparison between stablecoin swap platforms, we examined nearly $3b of transactions over a 2 month period, looking at swaps done directly with these swap platforms.  We found the following:</p>
<ul>
<li>Curve is, on aggregate, the cheapest place to swap the big 3 stablecoins.</li>
<li>For smaller transactions (&lt; 10k USD), Uniswap v3 appears to be cheaper due to gas cost efficiency</li>
<li>For larger transactions than 10k, Curve is the clear winner</li>
<li>There is a big advantage in transaction costs using a specialised stablecoin swap platform, as opposed a general purpose dex like Uniswap v2</li>
<li>Simply copying an existing concept is not a recipe for instant success for Saddle - the weight of liquidity in Curve translates to better outcomes for users, which begets even more liquidity and cheaper costs</li>
</ul>
<p>If you are a user looking to swap stablecoins (USDC, USDT, DAI), then <a href="https://curve.fi">Curve</a> should be the first choice.  It's worth a comparison with Uniswap v3, however, as it may be slightly more gas efficient on smaller trades.  Happy swapping.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="References:">
<a class="anchor" href="#References:" aria-hidden="true"><span class="octicon octicon-link"></span></a>References:<a class="anchor-link" href="#References:"> </a>
</h1>
<ul>
<li>All data was sourced from the curated on-chain data tables at <a href="https://flipsidecrypto.com">Flipside Crypto</a>  </li>
<li>Insights on dex pricing impacts were from this article by <a href="https://twitter.com/hasufl">Hasu</a> at <a href="https://research.paradigm.xyz/amm-price-impact">https://research.paradigm.xyz/amm-price-impact</a>  </li>
<li>The idea for this post was inspired by this article at the fantastic Curve Market Cap
<a href="https://curve.substack.com/p/august-18-2021-curve-vs-balancer">https://curve.substack.com/p/august-18-2021-curve-vs-balancer</a>
</li>
</ul>

</div>
</div>
</div>
</div>


</body>
  </div><a class="u-url" href="/analytics/curve/2021/09/19/Curve_Stableswaps.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/analytics/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/analytics/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/analytics/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>On-chain analysis by @scottincrypto</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/scottincrypto" title="scottincrypto"><svg class="svg-icon grey"><use xlink:href="/analytics/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/scottincrypto" title="scottincrypto"><svg class="svg-icon grey"><use xlink:href="/analytics/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
